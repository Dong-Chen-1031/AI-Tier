# AI-Tier åŠŸèƒ½èªªæ˜

## åŠŸèƒ½æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AI-Tier æ‡‰ç”¨ç¨‹å¼                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           1. å…¨å±€ç‹€æ…‹ç®¡ç† (Global State)                  â”‚ â”‚
â”‚  â”‚  ReviewCaseContext - å„²å­˜æ‰€æœ‰éŠ³è©•æ¡ˆä¾‹                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Case ID                                        â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Timestamp (æ™‚é–“æˆ³)                              â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Form Data (è¡¨å–®å…§å®¹)                            â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Image URL (åœ–ç‰‡é€£çµ)                            â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Streaming Text (ä¸²æµæ–‡å­—)                       â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Reply (å›è¦†å…§å®¹)                                â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Tier Decision (è©•ç´šæ±ºå®š)                        â”‚    â”‚ â”‚
â”‚  â”‚  â”‚                                                  â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ Methods:                                         â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ addCase() - æ–°å¢æ¡ˆä¾‹                            â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ updateCase() - æ›´æ–°æ¡ˆä¾‹                         â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ exportToJSON() - åŒ¯å‡º JSON                     â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ importFromJSON() - åŒ¯å…¥ JSON                   â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                               â”‚                                 â”‚
â”‚                               â”‚ å³æ™‚æ›´æ–°                        â”‚
â”‚                               â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           2. å¯é»æ“Šåœ–ç‰‡èˆ‡å½ˆçª— (Clickable Modal)            â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Tier List (å·¦å´)              Modal (å½ˆçª—)              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚  [å¤¯]      â”‚ â”€â”€é»æ“Šâ”€â”€â”€â”€â†’   â”‚  è©³ç´°è³‡è¨Šï¼š     â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”¬â”€â”¬â”€â”   â”‚   (å‹•ç•«)       â”‚                 â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ â”‚ğŸ–¼â”‚ğŸ–¼â”‚ğŸ–¼â”‚   â”‚               â”‚  â€¢ æ¡ˆä¾‹ ID      â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€â”´â”€â”´â”€â”˜   â”‚               â”‚  â€¢ æ™‚é–“          â”‚       â”‚ â”‚
â”‚  â”‚  â”‚            â”‚               â”‚  â€¢ è©•ç´šçµæœ      â”‚       â”‚ â”‚
â”‚  â”‚  â”‚  [é ‚ç´š]    â”‚               â”‚  â€¢ éŠ³è©•å…§å®¹      â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”¬â”€â”     â”‚               â”‚  â€¢ è¡¨å–®è³‡è¨Š      â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ â”‚ğŸ–¼â”‚ğŸ–¼â”‚     â”‚               â”‚                 â”‚       â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€â”´â”€â”˜     â”‚               â”‚  [é—œé–‰æŒ‰éˆ• âœ•]   â”‚       â”‚ â”‚
â”‚  â”‚  â”‚    ...     â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Features:                                               â”‚ â”‚
â”‚  â”‚  â€¢ Framer Motion layoutId è½‰å ´å‹•ç•«                        â”‚ â”‚
â”‚  â”‚  â€¢ Hover æ•ˆæœ                                            â”‚ â”‚
â”‚  â”‚  â€¢ Spring å½ˆç°§å‹•ç•«                                        â”‚ â”‚
â”‚  â”‚  â€¢ Backdrop èƒŒæ™¯æ¨¡ç³Š                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                               â”‚                                 â”‚
â”‚                               â”‚ åˆ†äº«                            â”‚
â”‚                               â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           3. å¾Œç«¯å„²å­˜èˆ‡åˆ†äº« (Backend & Sharing)            â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  [åˆ†äº«æŒ‰éˆ• ğŸ“¤]                                            â”‚ â”‚
â”‚  â”‚       â”‚                                                   â”‚ â”‚
â”‚  â”‚       â”œâ”€â†’ POST /save-cases                               â”‚ â”‚
â”‚  â”‚       â”‚   å„²å­˜åˆ° backend/shared_cases/{uuid}.json        â”‚ â”‚
â”‚  â”‚       â”‚                                                   â”‚ â”‚
â”‚  â”‚       â””â”€â†’ è¤‡è£½é€£çµåˆ°å‰ªè²¼ç°¿                                â”‚ â”‚
â”‚  â”‚           https://app.com/share/{uuid}                   â”‚ â”‚
â”‚  â”‚                    â”‚                                      â”‚ â”‚
â”‚  â”‚                    â†“                                      â”‚ â”‚
â”‚  â”‚           GET /share/{uuid}                              â”‚ â”‚
â”‚  â”‚                    â”‚                                      â”‚ â”‚
â”‚  â”‚                    â†“                                      â”‚ â”‚
â”‚  â”‚           é¡¯ç¤ºå…±äº«çš„ Tier List                            â”‚ â”‚
â”‚  â”‚           (ç›¸åŒçš„ä»‹é¢ + å¯é»æ“ŠæŸ¥çœ‹è©³æƒ…)                    â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å·¥ä½œæµç¨‹

### å‰µå»ºéŠ³è©•æ¡ˆä¾‹
```
1. ç”¨æˆ¶å¡«å¯«è¡¨å–® (subject, role_name, style, etc.)
   â†“
2. æäº¤è¡¨å–® â†’ POST /tier
   â†“
3. æ”¶åˆ° case_id å’Œ image_url
   â†“
4. æ·»åŠ åˆ°å…¨å±€ç‹€æ…‹ (addCase)
   â†“
5. æ’­æ”¾ TTS éŸ³é »
   â†“
6. ä¸²æµæ¥æ”¶æ–‡å­— â†’ å³æ™‚æ›´æ–°å…¨å±€ç‹€æ…‹ (updateCase)
   â†“
7. æª¢æ¸¬åˆ°è©•ç´šæ¨™è¨˜ [å¤¯/é ‚ç´š/äººä¸Šäºº/NPC/æ‹‰å®Œäº†]
   â†“
8. éŸ³é »çµæŸå¾Œï¼Œåœ–ç‰‡ç§»å‹•åˆ°å°æ‡‰çš„ tier
   â†“
9. æ¡ˆä¾‹å®Œæˆï¼Œå„²å­˜åœ¨å…¨å±€ç‹€æ…‹ä¸­
```

### æŸ¥çœ‹æ¡ˆä¾‹è©³æƒ…
```
1. é»æ“Š tier list ä¸­çš„åœ–ç‰‡
   â†“
2. layoutId å‹•ç•«è§¸ç™¼
   â†“
3. åœ–ç‰‡å¹³æ»‘éæ¸¡åˆ°å½ˆçª—
   â†“
4. é¡¯ç¤ºå®Œæ•´æ¡ˆä¾‹è³‡è¨Š
   â†“
5. é»æ“Šé—œé–‰æˆ–èƒŒæ™¯ â†’ å‹•ç•«è¿”å›åŸä½
```

### åˆ†äº«æ¡ˆä¾‹
```
1. é»æ“Šåˆ†äº«æŒ‰éˆ• ğŸ“¤
   â†“
2. æ”¶é›†æ‰€æœ‰æ¡ˆä¾‹æ•¸æ“š
   â†“
3. POST /save-cases
   â†“
4. å¾Œç«¯ç”Ÿæˆ UUID
   â†“
5. å„²å­˜ç‚º {uuid}.json
   â†“
6. è¿”å› share_id
   â†“
7. ç”Ÿæˆåˆ†äº«é€£çµ: /share/{uuid}
   â†“
8. è‡ªå‹•è¤‡è£½åˆ°å‰ªè²¼ç°¿
   â†“
9. é¡¯ç¤º "å·²è¤‡è£½é€£çµ" æç¤º
```

### æŸ¥çœ‹åˆ†äº«
```
1. è¨ªå• /share/{uuid}
   â†“
2. GET /share/{uuid}
   â†“
3. è®€å– JSON æ–‡ä»¶
   â†“
4. é¡¯ç¤ºæ‰€æœ‰æ¡ˆä¾‹çš„ tier list
   â†“
5. å¯é»æ“Šåœ–ç‰‡æŸ¥çœ‹è©³æƒ…ï¼ˆåŒä¸»é é¢ï¼‰
```

## æŠ€è¡“ç‰¹é»

### å‰ç«¯
- **ç‹€æ…‹ç®¡ç†**: React Context API
- **å‹•ç•«**: Framer Motion (layoutId, spring animations)
- **è·¯ç”±**: React Router v7
- **è¡¨å–®**: React Hook Form
- **HTTP**: Axios
- **é¡å‹å®‰å…¨**: TypeScript strict mode

### å¾Œç«¯
- **æ¡†æ¶**: FastAPI
- **é©—è­‰**: Pydantic models
- **å­˜å„²**: JSON æ–‡ä»¶ç³»çµ±
- **CORS**: å…è¨±å‰ç«¯è·¨åŸŸè«‹æ±‚

### æ•¸æ“šæµ
```
Frontend State â†â†’ JSON â†â†’ Backend Storage
     â†‘                          â†‘
     â”‚                          â”‚
  Component                 REST API
  Rendering              /save-cases
                         /share/:id
```

## å„ªå‹¢

1. **å³æ™‚æ€§**: ä¸²æµæ–‡å­—å³æ™‚æ›´æ–°åˆ°å…¨å±€ç‹€æ…‹
2. **æŒä¹…æ€§**: å¾Œç«¯ JSON æ–‡ä»¶æ°¸ä¹…ä¿å­˜
3. **å¯åˆ†äº«**: ç”Ÿæˆå”¯ä¸€é€£çµï¼Œéš¨æ™‚è¨ªå•
4. **ç”¨æˆ¶é«”é©—**: æµæš¢çš„å‹•ç•«éæ¸¡æ•ˆæœ
5. **é¡å‹å®‰å…¨**: TypeScript + Pydantic é›™é‡ä¿éšœ
6. **å¯æ“´å±•**: æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œæ˜“æ–¼æ·»åŠ æ–°åŠŸèƒ½

## API ç«¯é»ç¸½è¦½

| ç«¯é» | æ–¹æ³• | ç”¨é€” | è«‹æ±‚ | éŸ¿æ‡‰ |
|------|------|------|------|------|
| `/tier` | POST | å‰µå»ºéŠ³è©• | TierRequest | TierResponse |
| `/text/{case_id}` | GET | ç²å–ä¸²æµæ–‡å­— | - | StreamingResponse |
| `/tts/{case_id}` | GET | ç²å– TTS éŸ³é » | - | StreamingResponse |
| `/save-cases` | POST | ä¿å­˜æ¡ˆä¾‹ | SaveCasesRequest | share_id |
| `/share/{share_id}` | GET | ç²å–åˆ†äº«æ¡ˆä¾‹ | - | cases[] |
| `/models/{model_name}` | GET | ç²å– TTS æ¨¡å‹ | - | models[] |

## æ–‡ä»¶çµæ§‹

```
AI-Tier/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â””â”€â”€ ReviewCaseContext.tsx    # å…¨å±€ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ CaseDetailModal.tsx      # æ¡ˆä¾‹è©³æƒ…å½ˆçª—
â”‚   â”‚   â”œâ”€â”€ ShareButton.tsx          # åˆ†äº«æŒ‰éˆ•
â”‚   â”‚   â”œâ”€â”€ input.tsx                # è¡¨å–®è¼¸å…¥ï¼ˆå·²æ•´åˆç‹€æ…‹ï¼‰
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ home.tsx                 # ä¸»é ï¼ˆå·²æ•´åˆç‹€æ…‹ï¼‰
â”‚   â”‚   â””â”€â”€ shared.tsx               # åˆ†äº«é é¢
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ utils.ts                 # å·¥å…·å‡½æ•¸
â””â”€â”€ backend/
    â”œâ”€â”€ main.py                      # API ç«¯é»ï¼ˆå·²æ–°å¢åˆ†äº«åŠŸèƒ½ï¼‰
    â””â”€â”€ shared_cases/                # åˆ†äº«æ¡ˆä¾‹å­˜å„²ç›®éŒ„
        â””â”€â”€ {uuid}.json              # æ¡ˆä¾‹æ–‡ä»¶
```

## çµè«–

æ­¤å¯¦ä½œå®Œæ•´æ»¿è¶³æ‰€æœ‰ä¸‰å€‹éœ€æ±‚ï¼š
1. âœ… å…¨å±€ç‹€æ…‹ç®¡ç†èˆ‡ JSON åºåˆ—åŒ–
2. âœ… å¯é»æ“Šåœ–ç‰‡èˆ‡å‹•ç•«å½ˆçª—
3. âœ… å¾Œç«¯å„²å­˜èˆ‡åˆ†äº«åŠŸèƒ½

ç³»çµ±å·²æº–å‚™å¥½ç”¨æ–¼ç”Ÿç”¢ç’°å¢ƒï¼
